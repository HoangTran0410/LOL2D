<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LOL2D</title>

    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/p5@1.5.0/lib/p5.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/sat/0.8.0/SAT.min.js"></script>
    <script src="https://mrdoob.github.io/stats.js/build/stats.min.js"></script>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <!-- <script src="https://unpkg.com/peerjs@1.4.7/dist/peerjs.min.js"></script> -->
</head>

<body>
    <script src="index.js" type="module"></script>

    <div id="canvas"></div>

    <div id="InGameHUD">
        <!-- bottom HUD: champion avatar and list spells at the bottom -->
        <div v-if="avatar && spells && buffs" class="bottom-HUD">
            <div class="champion-avatar">
                <img :src="avatar" alt="champion-avatar">
            </div>
            <div class="champion-details">
                <div class="spells">
                    <div v-for="(spell, index) of spells" :class="spell.small ? 'spell small' : 'spell'"
                        @click="changeSpell(index)">
                        <img :src="spell.image" alt="spell"
                            :style="(spell.showCoolDown || !spell.canCast) ? 'filter: grayscale(100%)' : ''" />

                        <span v-if="spell.hotKey" class="hotKey">{{spell.hotKey}}</span>
                        <div v-if="spell.showCoolDown">
                            <div class="cooldown-overlay" :style="`height: ${spell.coolDownPercent}%`"></div>
                            <div class="cooldown">
                                <p>{{spell.coolDownText}}</p>
                            </div>
                        </div>
                        <div class="spell-info">
                            <h4>{{spell.name}}</h4>
                            <p>{{spell.description}}</p>
                            <p>Hồi chiêu: {{spell.coolDown/1000}}s</p>
                        </div>
                    </div>
                </div>
                <div class="health-bar">
                    <div class="bar">
                        <div :style="`width:${stats.healthPercent}%; background-color:#0ca20c`">
                        </div>
                        <p>{{stats.health}} / {{stats.maxHealth}}</p>
                    </div>
                    <div class="bar" style="margin-top:3px">
                        <div :style="`width:${stats.manaPercent}%; background-color:#218bdd;`">
                        </div>
                        <p>{{stats.mana}} / {{stats.maxMana}}</p>
                    </div>
                </div>
                <div class="buffs">
                    <div v-for="buff of buffs" class="buff">
                        <img :src="buff.image" alt="buff">
                        <span>{{buff.timeLeftText}}</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- spell picker -->
        <div v-if="showSpellsPicker" class="spell-picker">
            <button class="close-btn" @click="closeSpellPicker()">X</button>
            <p class="title">Chọn chiêu thức</p>
            <input class="spell-search-box" type="text" placeholder="Tìm kiếm chiêu thức" v-model="searchSpellText" />
            <div class="list">
                <div v-for="spell of filteredSpells" class="spell" @click="pick(spell)">
                    <img :src="spell.image" alt="spell" />
                    <div class="spell-info">
                        <h4>{{spell.name}}</h4>
                        <p>{{spell.description}}</p>
                        <p>Hồi chiêu: {{spell.coolDown/1000}}s</p>
                    </div>
                </div>
                <div v-if="filteredSpells.length === 0" class="not-found">
                    <span>Không tìm thấy chiêu thức</span>
                </div>
            </div>
        </div>
    </div>
</body>

</html>